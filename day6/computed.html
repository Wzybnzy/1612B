<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <button @click="add">添加货物1</button>
        <div>总价是：{{sum()}}</div>
        <!-- 底部总价 -->
        <div>总价是：{{sum()}}</div>
        <!-- 计算属性 -->
        <h3>计算属性总价</h3>
        <div>总价是:{{price}}</div>
        <div>总价是:{{price}}</div>
        <div>总价是:{{price}}</div>

        <input type="text" v-model="name">
        <p>{{value}}</p>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script>
let vm =  new Vue({
        el:'#app',
        data:{
            pack1:{
                count:1,
                price:10
            },
            pack2:{
                count:2,
                price:5
            },
            name:'',
            value:''
            // sum:0,
        },
        // watch: { //侦听器
        //     name(news,old){ //第一个参数是新值，第二个参数是老值
        //         this.value = news;
        //         console.log(news,old);
        //     }
        // },
        computed: { //计算属性
            // price(){ //缓存属性，当计算属性所依赖的数据（data）发生变化的时候，会重新计算属性，获取属性
            //     console.log('comp*********');
            //     return this.pack1.count * this.pack1.price + this.pack2.count * this.pack2.price;;
            // }
            price:{ //需要设置值的时候，用对象的这种形式
                get(){
                    return this.pack1.count * this.pack1.price + this.pack2.count * this.pack2.price;;
                },
                set(val){
                    console.log(val,'val&&&&&&&');
                }
            }
        },
        methods: {
            add(){
                this.pack1.count++;
                this.price = 1000;
                // this.sum = this.pack1.count * this.pack1.price + this.pack2.count * this.pack2.price
            },
            sum(){
                console.log('sum&&&&&');
                return this.pack1.count * this.pack1.price + this.pack2.count * this.pack2.price;
            }
        },
    });

    vm.$watch('name',(news,old)=>{
        console.log(news,old);
    });
</script>
</html>